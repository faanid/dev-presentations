# Heap vs Stack Memory in JavaScript: Best Practices for React Performance 🦆

## 1. مقدمه

آیا تا به حال برایتان سوال شده که چرا بعضی از متغیرها سریع‌تر از حافظه پاک می‌شوند، اما برخی دیگر مدت بیشتری باقی می‌مانند؟ یا اینکه چرا **JavaScript** از دو نوع حافظه متفاوت استفاده می‌کند؟

در این راهنما تفاوت حافظه **Stack** و **Heap** را بررسی می‌کنیم و یاد می‌گیریم که چگونه از آن‌ها برای بهینه‌سازی **عملکرد در React** استفاده کنیم. 🚀

---

## 2. Heap vs Stack Memory ✨

### 2.1. Stack Memory (حافظه پشته)

حافظه **Stack** برای **ذخیره داده‌های ساده و کوتاه‌مدت** استفاده می‌شود. این حافظه سریع است و بر اساس **LIFO** (آخرین ورودی، اولین خروجی) کار می‌کند.

### ✅ ویژگی‌ها:

- ذخیره مقادیر **اولیه (Primitive values)** مانند `string`، `number`، `boolean`.
- حذف داده‌ها به محض خروج از محدوده **تابع یا بلاک کد**.
- سریع و سبک.

### 🎯 مثال:

```javascript
function registerUser() {
  let name = "John"; // در Stack ذخیره می‌شود.
}
```

---

### 2.2. Heap Memory (حافظه هیپ)

حافظه **Heap** برای **ذخیره داده‌های پیچیده و طولانی‌مدت** استفاده می‌شود. این حافظه بزرگ‌تر و انعطاف‌پذیرتر از **Stack** است اما **کندتر** عمل می‌کند.

### ✅ ویژگی‌ها:

- ذخیره **آبجکت‌ها (Objects)** و **آرایه‌ها (Arrays)**.
- داده‌ها به‌صورت نامنظم در حافظه قرار می‌گیرند.
- داده‌ها تا زمانی که به آن‌ها نیاز باشد در حافظه باقی می‌مانند.

### 🎯 مثال:

```javascript
function registerUser() {
  let user = { name: "John", age: 30 }; // در Heap ذخیره می‌شود.
}
```

---

## 3. تفاوت‌های کلیدی بین Stack و Heap

| ویژگی   | Stack                     | Heap                                    |
| ------- | ------------------------- | --------------------------------------- |
| سرعت    | سریع 🚀                   | کندتر 🐢                                |
| ساختار  | **LIFO**                  | ذخیره نامنظم                            |
| استفاده | متغیرهای ساده (Primitive) | آبجکت‌ها و آرایه‌ها                     |
| طول عمر | کوتاه‌مدت                 | بلندمدت (تا زمانی که مرجع آن وجود دارد) |

---

## 4. تاثیر Stack و Heap در عملکرد React

در **React**، مقدار **state و props** که در حافظه **Heap** ذخیره می‌شوند، می‌توانند بر **عملکرد اپلیکیشن** تاثیر بگذارند. مدیریت صحیح این منابع باعث بهینه‌سازی سرعت برنامه می‌شود.

### ✅ نکات بهینه‌سازی:

- از ``** و **`` برای مدیریت داده‌های پیچیده استفاده کنید.
- از **Memoization (**``**, **``**)** برای کاهش محاسبات غیرضروری بهره ببرید.
- متغیرهای ساده را فقط در محدوده موردنیاز نگه دارید تا مصرف **Stack** بهینه شود.

### 🎯 مثال در React:

```javascript
const [user, setUser] = useState({ name: "John", age: 30 }); // ذخیره در Heap
const inputRef = useRef(null); // ذخیره در Stack
```

---

## 5. جمع‌بندی 🛠️

- **Stack** برای **متغیرهای ساده و موقتی** استفاده می‌شود.
- **Heap** برای **آبجکت‌ها و آرایه‌های پیچیده** به کار می‌رود.
- در **React**، مدیریت صحیح حافظه باعث **بهینه‌سازی عملکرد** می‌شود.
- استفاده از ``** و **`` می‌تواند **مصرف غیرضروری از حافظه Heap** را کاهش دهد.

**امیدوارم این راهنما به شما در بهینه‌سازی پروژه‌های React کمک کند! 🚀**

